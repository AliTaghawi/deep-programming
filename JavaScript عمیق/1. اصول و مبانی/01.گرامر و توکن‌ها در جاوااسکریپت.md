# گرامر و توکن‌ها در جاوااسکریپت

---

## نمای کلی ساختار نگارشی

گرامر یا ساختار نگارشی (Grammar) مجموعه قوانین رسمی است که مشخص می‌کند یک برنامهٔ جاوااسکریپت چگونه باید نوشته شود تا مفسر آن را به‌درستی بشناسد و اجرا کند.  
این قوانین به دو بخش کلی تقسیم می‌شوند:  
- گرامر لغوی (Lexical Grammar) که چگونگی تبدیل متن به توکن‌ها را تعریف می‌کند  
- گرامر نحوی (Syntactic Grammar) که آرایش توکن‌ها را در درخت نحوی مشخص می‌کند   

---

## گرامر لغوی (Lexical Grammar)

گرامر لغوی مشخص می‌کند که ورودی (یک رشته کاراکتری) چگونه به واحدهای ابتدایی به‌نام «توکن» (Token) شکسته می‌شود.  
این مرحله شامل شناسایی موارد زیر است:  
- جداکننده‌ها (WhiteSpace و LineTerminator)  
- کامنت‌ها (Comments)  
- ریزداده‌های نحوی یا Trivia (نظیر فضاهای خالی و پایان خط)  
- خودِ توکن‌ها (Identifier، Keyword، Literal و Punctuator)   

### دسته‌بندی توکن‌ها

- Identifier: نام متغیر یا تابع (مثال: `myVar`, `console`)  
- Keyword: کلمات کلیدی زبان (مثال: `if`, `function`, `return`)  
- Numeric Literal: اعداد دهدهی، هگزا دسیمال یا صفر دهی (مثال: `123`, `0xFF`, `0b1010`)  
- String Literal: رشته‌های داخل `'...'` یا `"..."`  
- Template Literal: قالب‌های رشته‌ای با Backtick و `${...}`  
- Punctuator: علائم جداکننده و عملگرها (مثال: `;`, `{}`, `=>`, `.`)  
- Regular Expression Literal: الگوهای عبارت منظم (مثال: `/ab+c/i`)   

---

## جداکننده‌ها (Separators)

جداکننده‌ها یا فضاهای خالی برای خوانایی کد اهمیت دارند اما در عمل اجرای کد نادیده گرفته می‌شوند.  
سه نوع جداکننده وجود دارد:  
- WhiteSpace: فاصله‌ها، تب‌ها و سایر کاراکترهای خالی  
- LineTerminator: پایان خط (`\n`, `\r\n`)  
- Automatic Semicolon Insertion: در صورت نبود `;` انتهای عبارت، مفسر به‌طور خودکار آن را اضافه می‌کند  
این مکانیزم‌ها اجازه می‌دهند نویسنده کد ساختار را بدون آوردن تعداد مشخصی `;` نیز حفظ کند  

---

## کامنت‌ها (Comments)

کامنت‌ها متونی هستند که در حین اجرا نادیده گرفته شده و صرفاً برای توضیح کد توسط برنامه‌نویس نوشته می‌شوند.  
دو نوع کامنت داریم:  
- کامنت تک‌خطی: از `//` تا انتهای خط  
- کامنت چندخطی: بین `/*` و `*/`  
جاوااسکریپت کامنت‌های تو در تو را پشتیبانی نمی‌کند؛ یعنی نمی‌توان چندخطی‌ای را داخل چندخطی دیگر آغاز کرد  

---

## ریزداده‌های نحوی (Syntactic Trivia)

ریزداده‌های نحوی یا Trivia آن اجزای نگارشی هستند که معنا را تغییر نمی‌دهند اما برای جداسازی یا خوانایی لازم‌اند:  
- WhiteSpace و LineTerminator (پیش‌تر توضیح داده شد)  
- Comments (پیش‌تر توضیح داده شد)  
- Directives: دستورهای سطح بالایی مانند `"use strict";` که بر نوع گرامر و قواعد اجرایی تأثیر می‌گذارند  
این موارد در مرحلهٔ تبدیل به درخت نحوی حذف می‌شوند اما در ارزیابی مبدأ (Initial Parsing) نقش کلیدی‌ دارند  

---

### مراجع

1. ECMAScript® 2023 Language Specification, ECMA-262 14th Edition, Chapter 4: Lexical Grammar.  
2. Mozilla Developer Network, “Lexical grammar” – JavaScript | MDN Web Docs.
