# Module Patterns in JavaScript โ ุชูุถุญ ฺฉุงูู ู ุนูู

ูุงฺููโูุง ุงุจุฒุงุฑ ุงุตู ุฌุฏุงฺฉุฑุฏู ฺฉุฏุ ูุฏุฑุช ูุงุจุณุชฺฏ ู ุฌููฺฏุฑ ุงุฒ ุขููุฏฺฏ ูุถุง ูุงู ุฏุฑ ูพุฑูฺูโูุง ุจุฒุฑฺฏ ูุณุชูุฏ. ุฏุฑ ุงุฏุงูู ุงููุงุน ุงูฺฏููุง ูุงฺูู ุฑุง ุจุฑุฑุณ ูโฺฉููุ ุงุฒ IIFE ุณุงุฏู ุชุง ุงุณุชุงูุฏุงุฑุฏูุง CommonJS ู ES Modules.

---

## ฑ. IIFE (Immediately Invoked Function Expression)

ฺฉ ุชุงุจุน ูุงุดูุงุณ ฺฉู ุจูุงูุงุตูู ูพุณ ุงุฒ ุชุนุฑู ุงุฌุฑุง ูโุดูุฏ ู ูุญุท ูุญู (private scope) ูโุณุงุฒุฏ.

```js
(function() {
  const privateVar = 42;
  console.log("IIFE ุงุฌุฑุง ุดุฏ:", privateVar);
})();
```

- ุงุฌุงุฏ ฺฉ ุจุณุชูู ุงุฒููู ุจุฑุง ูุชุบุฑูุง  
- ุญุฐู ุขููุฏฺฏ `global`  
- ููุงุณุจ ุงุณฺฉุฑูพุชโูุง ฺฉูฺฺฉ ุง ุฒูุงู ฺฉู ูุงฺููโุจูุฏ ุฑุณู ูุฌูุฏ ูุฏุงุฑุฏ  

---

## ฒ. Revealing Module Pattern

ุฑู ููููู IIFE ุจูุง ุดุฏูุ ุจุฎุด ุฏุงุฎู ุฎุตูุต ุฑุง ุชุนุฑู ู ุชูุงุจุน ุง ูุชุบุฑูุง ููุชุฎุจ ุฑุง ุจูโุตูุฑุช ฺฉูุชุฑูโุดุฏู ููุชุดุฑ ูโฺฉูุฏ.

```js
const Counter = (function() {
  let count = 0;
  function increment() { count++; }
  function get() { return count; }
  return { increment, get }; // ูุงุดโุณุงุฒ ููุท ุงู ุฏู ูุชุฏ
})();

Counter.increment();
console.log(Counter.get()); // 1
```

- ุฌุฏุงุณุงุฒ ูุชุบุฑูุง ุงุฒ ูุถุง ฺฉู  
- ูุงุดโุณุงุฒ ููุท API ุนููู  
- ุชุณุชโูพุฐุฑ ู ุฎูุงูุง ุจูุชุฑ  

---

## ณ. AMD (Asynchronous Module Definition)

ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ูุงฺููโูุง ุฏุฑ ูุฑูุฑฺฏุฑ ุจูโุตูุฑุช ุบุฑููุฒูุงู ุทุฑุงุญ ุดุฏูุ ูุงุฒููุฏ ุจุงุฑฺฏุฐุงุฑูุง ูุซู RequireJS ุงุณุช.

```js
// define.js
define(['./math'], function(math) {
  return {
    getResult: () => math.add(2,3)
  };
});

// main.js
require(['./define'], function(mod) {
  console.log(mod.getResult());
});
```

- ุจุงุฑฺฏุฐุงุฑ ูุงฺููโูุง ุฑู ูุฑูุฑฺฏุฑ ุจุฏูู ุจููฺฉู ุดุฏู  
- ุชุนุฑู ูุงุจุณุชฺฏ ูุจู ุงุฒ ุงุฌุฑุง  
- ุงูุง ูพฺุฏฺฏ ุฏุฑ ุชูุธู RequireJS ู overhead ูุณุจุชุงู ุจุดุชุฑ  

---

## ด. UMD (Universal Module Definition)

ุชููู ุงุฒ AMD ู CommonJS ู IIFE ุจุฑุง ุณุงุฒฺฏุงุฑ ุญุฏุงฺฉุซุฑ ุจุง ูุญุทโูุง ูุฎุชูู (ูุฑูุฑฺฏุฑุ Node.jsุ AMD).

```js
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    define(['dep'], factory);
  } else if (typeof module === 'object' && module.exports) {
    module.exports = factory(require('dep'));
  } else {
    root.MyLib = factory(root.dep);
  }
}(this, function(dep) {
  // ูุงฺูู ุดูุง
  return { doSomething: () => dep.action() };
}));
```

- ูพุดุชุจุงู ููโุฒูุงู ุงุฒ AMD ู CommonJS ู global  
- ููุงุณุจ ฺฉุชุงุจุฎุงููโูุง ฺฉู ุจุงุฏ ุฏุฑ ูุฑ ูุญุท ุงุฌุฑุง ุดููุฏ  

---

## ต. CommonJS (`require` / `module.exports`)

ุงูฺฏู ูุงฺููโููุณ ุงุตู ุฏุฑ Node.jsุ ุจุงุฑฺฏุฐุงุฑ ููุฒูุงู (synchronous) ู ุนุจุฑุช ุงุฒ ุชูุงุจุน `require` ู `module.exports`.

```js
// math.js
function add(a, b) { return a + b; }
module.exports = { add };

// index.js
const math = require('./math');
console.log(math.add(1,2)); // 3
```

- ุจุงุฑฺฏุฐุงุฑ ุณูฺฉุฑูู (ููุงุณุจ ูุงูโุณุณุชู ูุญู)  
- ูุฑ ูุงู ฺฉ ูุงฺูู ุฌุฏุงฺฏุงูู  
- ุงูฺฉุงู ุชุบุฑ exports ุฏุฑ ูุฑ ููุทู ุงุฒ ูุงฺูู  

---

## ถ. ES Modules (`import` / `export`)

ุงุณุชุงูุฏุงุฑุฏ ูุงฺููโุจูุฏ ุฏุฑ ECMAScriptุ ุจุงุฑฺฏุฐุงุฑ ุงุณุชุงุชฺฉ (static) ู ูพุดุชุจุงู ุงุฒ tree-shaking.

```js
// math.mjs
export function add(a, b) { return a + b; }

// index.mjs
import { add } from './math.mjs';
console.log(add(5,6)); // 11
```

- ุชุญูู ูุงุจุณุชฺฏ ุฏุฑ ุฒูุงู ฺฉุงููพุงู  
- ูพุดุชุจุงู native ุฏุฑ ูุฑูุฑฺฏุฑูุง ูุฏุฑู ู Node.js (ุจุง `"type": "module"`)  
- ูุญุฏูุฏ ุจู top-level ุจุฑุง `import` ู `export`  

---

## ท. ููุงุณู CommonJS ู ES Modules

| ูฺฺฏ                     | CommonJS                     | ES Modules                      |
|---------------------------|------------------------------|---------------------------------|
| ูุญูู ุจุงุฑฺฏุฐุงุฑ             | ููุฒูุงู (Synchronous)         | ุงุณุชุงุชฺฉ (Static)               |
| ุชุญูู ูุงุจุณุชฺฏ             | ุฏุฑ ุฒูุงู ุงุฌุฑุง                 | ุฏุฑ ุฒูุงู ฺฉุงููพุงู                |
| Tree-shaking              | ูุฏุงุฑุฏ                        | ุจูู                             |
| ุณูุชฺฉุณ                   | `require()`, `module.exports`| `import`, `export`              |
| ูพุดุชุจุงู ูุฑูุฑฺฏุฑ          | ูุงุฒ ุจู ุจุงูุฏูุฑ               | native ุฏุฑ ูุฑูุฑฺฏุฑูุง ูุฏุฑู       |
| ูุงุจูุช ุชุบุฑ ุฎุฑูุฌ        | ุจูู                          | ุฎุฑูุฌ ุซุงุจุช ุฏุฑ ุฒูุงู ุงุฌุฑุง         |

---

## ธ. ูฺฉุงุช ุนูู ู ููุงุฌุฑุช

- ูพุฑูฺูโูุง ุฌุฏุฏ: **ES Modules** ุจุง ุจุงุฑฺฏุฐุงุฑ ุงุณุชุงุชฺฉ ู tree-shaking  
- ฺฉุชุงุจุฎุงููโูุง ููุชุดุฑุดุฏู ุจุฑุง ููู ูุญุทโูุง: **UMD**  
- ุงฺฏุฑ ุฏุฑ Node.js ูุณุชุฏ ู ูุงุฒ ุจู ฺฉุชุงุจุฎุงููโูุง CommonJS ุฏุงุฑุฏุ ุงุฒ dynamic `import()` ุง `createRequire` ุงุณุชูุงุฏู ฺฉูุฏ  
- ุจุฑุง ุงูุชูุงู ุชุฏุฑุฌ ุงุฒ CommonJS ุจู ESM:
  - ุชุบุฑ ูพุณููุฏ ุงุฒ `.js` ุจู `.mjs` ุง ุงูุฒูุฏู `"type": "module"` ุฏุฑ `package.json`  
  - ุงุตูุงุญ `require()` ุจู `import` ู `module.exports` ุจู `export`  
  - ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง ู ุงุณุชูุงุฏู ุงุฒ `esm` loader ุฏุฑ ุตูุฑุช ูุงุฒ  

---

## น. ููุงุจุน ุจุดุชุฑ

- MDN โ Module Patterns Overview  
- ูุณุชูุฏุงุช Node.js ุฏุฑุจุงุฑู ECMAScript Modules  
- ุฑุงูููุง RequireJS ุจุฑุง AMD  
- ููุงูุงุช ยซModule Systems in JavaScriptยป  

---

ุงฺฏุฑ ูโุฎูุงู ูุซุงู ุนูู ุจุณุงุฒู ุง ุฏุฑุจุงุฑู Module Federation ู ุจุงูุฏูุฑูุง ูุซู Webpack ู Rollup ุตุญุจุช ฺฉููุ ุฎุจุฑ ุจุฏู! ๐
