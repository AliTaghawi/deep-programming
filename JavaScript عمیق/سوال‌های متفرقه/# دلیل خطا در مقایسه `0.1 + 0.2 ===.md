# دلیل خطا در مقایسه `0.1 + 0.2 === 0.3`

در JavaScript (و بیشتر زبان‌های مبتنی بر IEEE-754) اعداد اعشاری ده‌درصد دقیقاً در مبنای دو قابل نمایش نیستند. وقتی می‌نویسیم:

```js
0.1 + 0.2
```

در حافظه به شکلی شبیهِ این عدد ذخیره می‌شود:

```
0.30000000000000004
```

بنابراین:

```js
console.log(0.1 + 0.2 === 0.3)  // false
```

چون مقدار سمت چپ عملاً با `0.3` اختلاف کوچکی دارد.

---

## چرا این خطا اتفاق می‌افتد؟

- سیستم عددی کامپیوترها (IEEE-754 double) اعداد اعشاری را در قالب دودویی ذخیره می‌کند.  
- اعدادی مثل `0.1` و `0.2` در مبنای دودویی دنباله نامتناهی دارند و با گردکردن ذخیره می‌شوند.  
- هنگام جمع، خطاهای گردکردن جمع می‌شوند و نتیجه‌ی نهایی کمی با مقدار انتظاری (`0.3`) تفاوت پیدا می‌کند.

---

## روش مقایسه با تلرانس (ε)

برای مقایسه‌ی اعشاری بهتر است به جای برابری سختگیرانه، اختلاف را با یک عدد کوچک (epsilon) بسنجیم:

```js
function nearlyEqual(a, b, eps = 1e-10) {
  return Math.abs(a - b) < eps;
}

console.log(nearlyEqual(0.1 + 0.2, 0.3));  // true
```

اینجا اگر اختلاف دو عدد از `1e-10` کمتر باشد، آن‌ها را برابر فرض می‌کنیم.

---

## روش‌های متداول دیگر

- گرد کردن نتیجه تا تعداد اعشار معین:  
  ```js
  Number((0.1 + 0.2).toFixed(2)) === 0.3  // true
  ```
- استفاده از کتابخانه‌های عددی دقیق مثل decimal.js یا Big.js  
- انجام محاسبات به جای اعشاری با اعداد صحیح (مثلاً ضرب در 100):  
  ```js
  (10 + 20) / 100 === 0.3  // true
  ```

---

با این تکنیک‌ها می‌توانید از مشکلات ناشی از خطاهای گردکردن اعشاری در JavaScript عبور کنید و مقایسه‌های دقیق‌تری داشته باشید.
