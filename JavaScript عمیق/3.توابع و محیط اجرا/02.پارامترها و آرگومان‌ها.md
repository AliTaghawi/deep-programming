# پارامترها و آرگومان‌ها در JavaScript

در JavaScript، پارامتر (Parameter) متغیری است که در تعریف تابع مشخص می‌شود و آرگومان (Argument) مقدار واقعی‌ای است که هنگام فراخوانی تابع به‌ آن پارامترها اختصاص می‌یابد. این دو نقش متفاوت اما مکمل دارند: پارامترها قرارداد امضای تابع را تعیین می‌کنند و آرگومان‌ها داده‌هایی را به آن تحویل می‌دهند.

---

## Default Parameters

### نحو و ارزیابی  
```js
function greet(name = "Guest", time = new Date().getHours()) {
  console.log(`سلام ${name}, ساعت ${time}`);
}
```  
Default Parameters تنها وقتی آرگومانی ارائه نشود (یا undefined باشد) اعمال می‌شوند. مقدار پیش‌فرض در زمان فراخوانی و پیش از ورود به بدنه تابع ارزیابی می‌گردد.

### ویژگی‌ها و نکات  
- هر default در اسکوپ محلی پارامترها قرار دارد و می‌تواند به پارامترهای قبلی ارجاع دهد:  
  ```js
  function point(x = 0, y = x + 1) { … }
  ```  
- Defaultها در تعداد عناصر تابع (`.length`) لحاظ نمی‌شوند.  
- توجه کنید اگر مقدار صریح `undefined` بدهید، default اعمال می‌شود ولی `null` ارزیابی‌شده به‌عنوان مقدار معتبر است.

### Default با Destructuring  
```js
function draw({ x = 0, y = 0, color = "red" } = {}) { … }
```  
در صورتی که کل شیء یا برخی خصوصیات ارائه نشود، defaultهای داخلی یا شیء خالی به‌کار خواهند آمد.

---

## Rest Parameters

### نحو و کاربرد  
```js
function sum(...numbers) {
  return numbers.reduce((a, b) => a + b, 0);
}
sum(1, 2, 3, 4); // [1,2,3,4]
```  
Rest Parameters (`...نام`) تمام آرگومان‌های اضافی را در قالب یک آرایه واقعی جمع می‌کنند. این آرایه قابلیت استفاده از متدهای آرایه‌ای را دارد.

### تفاوت با arguments  
- Rest آرایه واقعی است و از متدهایی مثل `map` و `filter` پشتیبانی می‌کند.  
- Rest باید **آخرین** پارامتر تعریف گردد و تنها یک بار مجاز است.  
- `arguments` در توابع معمولی شیٔ شبه‌آرایه‌ای است که حالت lexical ندارد و در Arrow Function وجود ندارد.

---

## Spread در فراخوانی توابع

### نحو و کاربرد  
```js
const nums = [4, 5, 6];
Math.max(...nums);      // معادل Math.max(4,5,6)
f(...rest, 7, ...more);
```  
Spread (`...آرایه` یا هر Iterable) عناصر یک مجموعه را به‌صورت مجزا در موقعیت آرگومان تابع می‌گستراند.

### نکات و مثال‌ها  
- جایگزین `apply` برای فراخوانی توابع با آرایه:  
  ```js
  fn.apply(null, arr);
  fn(...arr);
  ```  
- می‌توانید spread را با آرگومان‌های ثابت ترکیب کنید:  
  ```js
  fetch(url, ...options);
  ```  
- در مواردی که آرایه بسیار بزرگ باشد، هر بار کپی شدن آن با spread ممکن است فشار حافظه و زمان اجرا را افزایش دهد.

---

## جدول مقایسهٔ Default، Rest و Spread

| ویژگی                | Default                    | Rest                            | Spread                          |
|-----------------------|----------------------------|---------------------------------|---------------------------------|
| محل استفاده          | تعریف تابع                | تعریف تابع                     | فراخوانی تابع                  |
| سینتکس                | `param = value`            | `...params`                     | `...iterable`                   |
| نوع مقدار            | مقدار واحد یا عبارت       | آرایه واقعی                    | مقادیر جداشده از iterable       |
| محدودیت              | درون پرانتز یا Destructuring  | آخرین پارامتر و یکتا             | فقط در آرایه/فراخوانی/شیء       |
| تأثیر روی `.length`   | پارامترهای بعد از default شمارش نمی‌شوند | rest اصلاً در length حساب نمی‌شود | ندارد                          |

---

## نکات پیشرفته و بهترین شیوه‌ها

- Default Parameters برای Dependency Injection یا پیکربندی تابع مفیدند و خوانایی امضا را بالا می‌برند.  
- از Rest به‌جای `arguments` در توابع معمولی بهره ببرید تا کدتان صریح‌تر و با قابلیت آرایه‌سازی باشد.  
- Spread در فراخوانی توابع باعث انعطاف‌پذیری می‌شود ولی کپی سطحی می‌سازد؛ مراقب عملکرد در حلقه‌های داغ باشید.  
- هنگام استفاده از Default با Destructuring، همواره برای کل پارامتر شیء یک default (`= {}`) تعریف کنید تا از خطای “Cannot destructure property” جلوگیری شود.  

---

## منابع پیشنهادی

- MDN Web Docs: Function default parameters  
- MDN Web Docs: Rest parameters  
- MDN Web Docs: Spread syntax  
- You Don’t Know JS (ES6 & Beyond) by Kyle Simpson
